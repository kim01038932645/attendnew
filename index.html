<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SRT Dì¡° ì¶œì„ë¶€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; -webkit-tap-highlight-color: transparent; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
        .calendar-day { min-height: 64px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 12px; font-size: 0.75rem; transition: all 0.2s; position: relative; }
        .active-day { background-color: #f8fafc; border: 1px solid #f1f5f9; cursor: pointer; }
        .active-day:active { background-color: #f1f5f9; transform: scale(0.95); }
        .training-day { font-weight: 800; color: #1d4ed8; background-color: #eff6ff; border: 1px solid #bfdbfe; }
        .training-day::after { content: 'â€¢'; position: absolute; top: 2px; right: 4px; color: #3b82f6; font-size: 14px; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .animate-slide-up { animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <div id="app" class="max-w-md mx-auto min-h-screen bg-white shadow-2xl overflow-x-hidden relative">
        <!-- Loading Spinner -->
        <div id="loading" class="fixed inset-0 bg-white z-[60] flex items-center justify-center">
            <div class="flex flex-col items-center">
                <div class="animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"></div>
                <p class="mt-4 text-slate-500 font-bold tracking-tight">ì‹œìŠ¤í…œ ì¤€ë¹„ ì¤‘...</p>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="screen-login" class="hidden p-8 flex flex-col items-center justify-center min-h-screen">
            <div class="text-center mb-12">
                <div class="inline-block p-3 bg-blue-50 rounded-2xl mb-4">
                    <span class="text-4xl">ğŸƒâ€â™‚ï¸</span>
                </div>
                <h1 class="text-4xl font-black text-slate-900 tracking-tighter">SRT Dì¡°</h1>
                <p class="text-slate-500 font-medium mt-2 uppercase tracking-widest text-xs">Running Crew 2026</p>
            </div>
            
            <div class="w-full space-y-4">
                <div class="bg-slate-50 p-5 rounded-3xl border border-slate-100">
                    <label class="block text-xs font-black mb-3 text-slate-400 uppercase ml-1">Member Select</label>
                    <select id="user-select" class="w-full p-4 bg-white border border-slate-200 rounded-2xl text-lg font-bold outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all appearance-none">
                        <option value="">ë³¸ì¸ ì´ë¦„ì„ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                </div>
                <button id="btn-login" class="w-full bg-blue-600 text-white py-5 rounded-3xl text-xl font-black shadow-xl shadow-blue-200 active:scale-95 transition-all">
                    ì‹œì‘í•˜ê¸°
                </button>
            </div>

            <div class="w-full mt-10 bg-slate-50 p-6 rounded-[2rem] border border-slate-100">
                <h2 class="text-sm font-black mb-5 flex items-center text-slate-800 uppercase tracking-wider">
                    <span class="mr-2">ğŸ”¥</span> Monthly Leaders
                </h2>
                <div class="grid grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <h3 class="text-[10px] font-black text-blue-600 uppercase tracking-widest">Distance (km)</h3>
                        <ul id="rank-distance" class="text-xs space-y-3"></ul>
                    </div>
                    <div class="space-y-4">
                        <h3 class="text-[10px] font-black text-emerald-600 uppercase tracking-widest">Attendance</h3>
                        <ul id="rank-attendance" class="text-xs space-y-3"></ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Screen -->
        <div id="screen-main" class="hidden">
            <header class="bg-slate-900 text-white p-8 rounded-b-[3rem] shadow-2xl">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <p class="text-[10px] font-bold text-blue-400 uppercase tracking-widest mb-1">Welcome back</p>
                        <span id="display-name" class="text-3xl font-black"></span><span class="text-xl font-medium opacity-60 ml-1">ë‹˜</span>
                    </div>
                    <button id="btn-logout" class="bg-white/10 hover:bg-white/20 p-3 rounded-2xl transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                        </svg>
                    </button>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white/5 p-5 rounded-[2rem] border border-white/10 backdrop-blur-md">
                        <p class="text-[10px] uppercase font-black text-blue-400 mb-2">Distance</p>
                        <p class="text-2xl font-black"><span id="stats-dist">0.0</span><span class="text-xs ml-1 opacity-40">km</span></p>
                    </div>
                    <div class="bg-white/5 p-5 rounded-[2rem] border border-white/10 backdrop-blur-md">
                        <p class="text-[10px] uppercase font-black text-emerald-400 mb-2">Check-in</p>
                        <p class="text-2xl font-black"><span id="stats-attr">0</span><span class="text-xs ml-1 opacity-40">íšŒ</span></p>
                    </div>
                </div>
            </header>

            <main class="p-6">
                <div class="flex items-center justify-between mb-8 px-2">
                    <button id="btn-prev-month" class="w-12 h-12 flex items-center justify-center bg-slate-100 rounded-2xl text-xl font-bold active:scale-90 transition-all text-slate-400">ã€ˆ</button>
                    <h2 id="calendar-title" class="text-2xl font-black text-slate-800 tracking-tighter">2026ë…„ 1ì›”</h2>
                    <button id="btn-next-month" class="w-12 h-12 flex items-center justify-center bg-slate-100 rounded-2xl text-xl font-bold active:scale-90 transition-all text-slate-400">ã€‰</button>
                </div>

                <div class="calendar-grid mb-4 px-1">
                    <div class="text-center text-[10px] font-black text-red-400">SUN</div>
                    <div class="text-center text-[10px] font-black text-slate-300">MON</div>
                    <div class="text-center text-[10px] font-black text-slate-300">TUE</div>
                    <div class="text-center text-[10px] font-black text-blue-400">WED</div>
                    <div class="text-center text-[10px] font-black text-slate-300">THU</div>
                    <div class="text-center text-[10px] font-black text-slate-300">FRI</div>
                    <div class="text-center text-[10px] font-black text-slate-300">SAT</div>
                </div>
                <div id="calendar-body" class="calendar-grid"></div>

                <div class="mt-10 p-6 bg-slate-50 rounded-[2rem] border border-slate-100">
                    <h4 class="text-xs font-black text-slate-800 mb-3 flex items-center">
                        <span class="mr-2">â„¹ï¸</span> í›ˆë ¨ ì•ˆë‚´
                    </h4>
                    <ul class="text-[11px] text-slate-500 space-y-2 font-medium leading-relaxed">
                        <li>â€¢ ìˆ˜ìš”ì¼(ì•¼ê°„), ì¼ìš”ì¼(ì˜¤ì „) ê³µì‹ ì •ê¸° í›ˆë ¨</li>
                        <li>â€¢ ë‹¬ë¦° ë‚ ì§œë¥¼ í´ë¦­í•˜ì—¬ ê±°ë¦¬ì™€ ì¶œì„ ì—¬ë¶€ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</li>
                        <li>â€¢ ëª¨ë“  ê¸°ë¡ì€ ì‹¤ì‹œê°„ ë­í‚¹ì— í•©ì‚°ë˜ì–´ ë°˜ì˜ë©ë‹ˆë‹¤.</li>
                    </ul>
                </div>
            </main>
        </div>

        <!-- Input Modal -->
        <div id="modal" class="hidden fixed inset-0 bg-slate-900/60 z-[70] flex items-end sm:items-center justify-center p-4 backdrop-blur-sm">
            <div class="bg-white w-full max-sm:rounded-t-[3rem] sm:rounded-[3rem] p-8 animate-slide-up shadow-2xl relative">
                <div class="absolute top-4 left-1/2 -translate-x-1/2 w-12 h-1.5 bg-slate-100 rounded-full sm:hidden"></div>
                <div class="flex justify-between items-start mb-8 mt-2">
                    <div>
                        <p class="text-[10px] font-black text-blue-600 uppercase tracking-widest mb-1">Record Entry</p>
                        <h3 id="modal-date" class="text-2xl font-black text-slate-800">2026-01-01</h3>
                    </div>
                    <button id="btn-close-modal" class="bg-slate-50 p-2 rounded-xl text-slate-400">âœ•</button>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-xs font-black mb-3 text-slate-400 uppercase tracking-wider ml-1">Distance (km)</label>
                        <input type="number" id="input-distance" step="0.1" class="w-full p-5 bg-slate-50 border-2 border-transparent rounded-3xl text-3xl font-black outline-none focus:bg-white focus:border-blue-500 transition-all" placeholder="0.0">
                    </div>
                    <div id="attendance-toggle-area" class="flex items-center justify-between p-6 bg-blue-50/50 rounded-3xl border border-blue-100">
                        <div class="flex items-center">
                            <span class="text-blue-900 font-bold">ì •ê¸° í›ˆë ¨ ì¶œì„í•¨</span>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="input-attendance" class="sr-only peer">
                            <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                        </label>
                    </div>
                    <button id="btn-save" class="w-full py-5 bg-blue-600 text-white rounded-3xl font-black text-lg shadow-xl shadow-blue-100 active:scale-95 transition-all">ë°ì´í„° ì €ì¥</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase Setup
        const userProvidedConfig = {
            apiKey: "AIzaSyBBP8vP90bOisbNlDpsp64k3hxLZw7x2JE",
            authDomain: "attendnew-63c66.firebaseapp.com",
            databaseURL: "https://attendnew-63c66-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "attendnew-63c66",
            storageBucket: "attendnew-63c66.firebasestorage.app",
            messagingSenderId: "992717620682",
            appId: "1:992717620682:web:5ee93256b2a5172d72fb33"
        };

        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : userProvidedConfig;
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'srt-d-group-2026';

        const members = [
            "ê°•ë™í˜„", "ê°•ë™í›ˆ", "ì†¡ì±„í•œ", "ê¹€ë¯¸í™”", "ê¹€ì¬ì‚°", "ê¹€ì°¬ì„", "ê¹€í•œë‚˜", "ë¥˜ì§€ì°¬", 
            "ë°•ì„±í™˜", "ë°•ì¢…ë´‰", "ì†Œë³‘ë“", "ì„œì •í™”", "ì‹ ì˜ì„­", "ì•ˆì§€í›ˆ", "ì˜¤í•œì²œ", "ì´ìŠ¹ì¤€", 
            "ì´ìš©êµ¬", "ì •ë•ìˆ˜", "ì£¼íš¨ì„", "ì„œì¸ìˆ˜", "ë°•ì°½ì„ ", "ê¹€ë³‘ì‹"
        ].sort();

        // Application State
        let currentUser = localStorage.getItem('srt_d_name') || null;
        let authUser = null;
        let currentMonth = new Date(2026, 0, 1);
        let selectedDateStr = "";
        let userData = {}; 
        let allRecords = []; 

        const els = {
            loading: document.getElementById('loading'),
            loginScreen: document.getElementById('screen-login'),
            mainScreen: document.getElementById('screen-main'),
            userSelect: document.getElementById('user-select'),
            modal: document.getElementById('modal'),
            modalDate: document.getElementById('modal-date'),
            inputDistance: document.getElementById('input-distance'),
            inputAttendance: document.getElementById('input-attendance'),
            btnSave: document.getElementById('btn-save'),
            statsDist: document.getElementById('stats-dist'),
            statsAttr: document.getElementById('stats-attr'),
            calendarTitle: document.getElementById('calendar-title'),
            calendarBody: document.getElementById('calendar-body'),
            displayName: document.getElementById('display-name'),
            rankDist: document.getElementById('rank-distance'),
            rankAttr: document.getElementById('rank-attendance')
        };

        function updateStats() {
            const y = currentMonth.getFullYear(), m = currentMonth.getMonth();
            let dSum = 0, aSum = 0;
            // userDataì—ì„œ í˜„ì¬ ì›”ì˜ í•©ê³„ ê³„ì‚° (ì‚¬ìš©ìë³„ í•„í„°ë§ì€ syncì—ì„œ ì²˜ë¦¬)
            Object.keys(userData).forEach(ds => {
                const dt = new Date(ds);
                if (dt.getFullYear() === y && dt.getMonth() === m) {
                    dSum += parseFloat(userData[ds].distance || 0);
                    if (userData[ds].attendance) aSum++;
                }
            });
            els.statsDist.textContent = dSum.toFixed(1);
            els.statsAttr.textContent = aSum;
        }

        function updateRankings() {
            const y = 2026, m = currentMonth.getMonth();
            const scores = {};
            members.forEach(n => scores[n] = { dist: 0, attr: 0 });

            allRecords.forEach(r => {
                const [name, ds] = r.id.split('_');
                if (!scores[name]) return;
                const dt = new Date(ds);
                if (dt.getFullYear() === y && dt.getMonth() === m) {
                    scores[name].dist += parseFloat(r.distance || 0);
                    if (r.attendance) scores[name].attr += 1;
                }
            });

            const sortD = Object.entries(scores).sort((a,b) => b[1].dist - a[1].dist).slice(0, 8);
            const sortA = Object.entries(scores).sort((a,b) => b[1].attr - a[1].attr).slice(0, 8);

            els.rankDist.innerHTML = sortD.map(([n, s], i) => `
                <li class="flex justify-between items-center bg-white p-2 rounded-xl border border-slate-100">
                    <span class="font-black text-slate-300 w-4">${i+1}</span>
                    <span class="flex-1 font-bold text-slate-700 ml-2">${n}</span>
                    <span class="text-blue-600 font-black">${s.dist.toFixed(1)}</span>
                </li>
            `).join('') || "ë°ì´í„° ì—†ìŒ";

            els.rankAttr.innerHTML = sortA.map(([n, s], i) => `
                <li class="flex justify-between items-center bg-white p-2 rounded-xl border border-slate-100">
                    <span class="font-black text-slate-300 w-4">${i+1}</span>
                    <span class="flex-1 font-bold text-slate-700 ml-2">${n}</span>
                    <span class="text-emerald-600 font-black">${s.attr}</span>
                </li>
            `).join('') || "ë°ì´í„° ì—†ìŒ";
        }

        function renderCalendar() {
            els.calendarBody.innerHTML = '';
            const y = currentMonth.getFullYear(), m = currentMonth.getMonth();
            const first = new Date(y, m, 1).getDay();
            const last = new Date(y, m + 1, 0).getDate();

            for (let i = 0; i < first; i++) els.calendarBody.appendChild(Object.assign(document.createElement('div'), {className:'calendar-day'}));

            for (let d = 1; d <= last; d++) {
                const date = new Date(y, m, d);
                const ds = `${y}-${String(m + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                const isT = date.getDay() === 0 || date.getDay() === 3;
                const cell = document.createElement('div');
                cell.className = `calendar-day active-day ${isT ? 'training-day' : ''}`;
                
                const rec = userData[ds] || {};
                const hasD = parseFloat(rec.distance) > 0;
                const isA = rec.attendance;
                
                cell.innerHTML = `
                    <div class="${date.getDay() === 0 ? 'text-red-500' : ''}">${d}</div>
                    <div class="text-[9px] font-black mt-1 text-slate-400">${hasD ? rec.distance : ''}</div>
                    ${isA ? '<div class="absolute bottom-1 w-1 h-1 rounded-full bg-emerald-500"></div>' : ''}
                `;
                cell.onclick = () => {
                    selectedDateStr = ds;
                    els.modalDate.textContent = ds;
                    els.inputDistance.value = rec.distance || '';
                    els.inputAttendance.checked = rec.attendance || false;
                    document.getElementById('attendance-toggle-area').style.display = isT ? 'flex' : 'none';
                    els.modal.classList.remove('hidden');
                };
                els.calendarBody.appendChild(cell);
            }
        }

        // Firebase Sync - ì¸ì¦ ì—†ì´ ê³µìš© ë°ì´í„° í™œìš©
        function startSync() {
            // Public ë°ì´í„° ë™ê¸°í™” (ë­í‚¹ìš©)
            const pubRef = collection(db, 'artifacts', appId, 'public', 'data', 'records');
            onSnapshot(pubRef, (snap) => {
                allRecords = snap.docs.map(d => ({ ...d.data(), id: d.id }));
                
                // í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ë°ì´í„°ë§Œ userDataì— ì¶”ì¶œ
                if (currentUser) {
                    const prefix = `${currentUser}_`;
                    const newUserDate = {};
                    allRecords.forEach(r => {
                        if (r.id.startsWith(prefix)) {
                            const dateKey = r.id.replace(prefix, "");
                            newUserDate[dateKey] = r;
                        }
                    });
                    userData = newUserDate;
                    renderCalendar(); 
                    updateStats();
                }
                updateRankings();
            }, e => {
                console.error("ë°ì´í„° ë™ê¸°í™” ì‹¤íŒ¨. Firebase ê·œì¹™(Rule)ì„ í™•ì¸í•˜ì„¸ìš”:", e);
                // ê·œì¹™ ì˜¤ë¥˜ ì‹œ ë¡œì»¬ ë°ì´í„°ë§Œì´ë¼ë„ ë Œë”ë§í•˜ë„ë¡ ìœ ë„ ê°€ëŠ¥
            });
        }

        async function init() {
            // ë©¤ë²„ ëª©ë¡ ì…‹ì—…
            members.forEach(m => {
                const o = document.createElement('option');
                o.value = m; o.textContent = m;
                els.userSelect.appendChild(o);
            });

            // ì¸ì¦ ë¬´ì‹œí•˜ê³  ì¼ë‹¨ í™”ë©´ í‘œì‹œ
            if (currentUser && members.includes(currentUser)) {
                els.displayName.textContent = currentUser;
                els.loginScreen.classList.add('hidden');
                els.mainScreen.classList.remove('hidden');
            } else {
                els.loginScreen.classList.remove('hidden');
                els.mainScreen.classList.add('hidden');
            }
            
            // ë¡œë”© ìˆ¨ê¸°ê¸° (ì¸ì¦ ì„±ê³µ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ì¦‰ì‹œ)
            els.loading.classList.add('hidden');

            // ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì¸ì¦ ì‹œë„ (ì„±ê³µí•˜ë©´ ì¢‹ê³ , ì‹¤íŒ¨í•´ë„ ìƒê´€ì—†ìŒ)
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (err) {
                console.warn("Auth skipped or failed:", err.message);
            }

            // ì¸ì¦ ë¦¬ìŠ¤ë„ˆ
            onAuthStateChanged(auth, (user) => {
                authUser = user;
                startSync();
            });

            // ë¦¬ìŠ¤ë„ˆê°€ í˜¸ì¶œë˜ì§€ ì•Šì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ì§ì ‘ í˜¸ì¶œ
            startSync();
        }

        document.getElementById('btn-login').onclick = () => {
            const n = els.userSelect.value;
            if (n) {
                localStorage.setItem('srt_d_name', n);
                location.reload();
            }
        };
        document.getElementById('btn-logout').onclick = () => {
            localStorage.removeItem('srt_d_name');
            location.reload();
        };
        document.getElementById('btn-prev-month').onclick = () => {
            currentMonth.setMonth(currentMonth.getMonth() - 1);
            els.calendarTitle.textContent = `${currentMonth.getFullYear()}ë…„ ${currentMonth.getMonth() + 1}ì›”`;
            renderCalendar(); updateStats(); updateRankings();
        };
        document.getElementById('btn-next-month').onclick = () => {
            currentMonth.setMonth(currentMonth.getMonth() + 1);
            els.calendarTitle.textContent = `${currentMonth.getFullYear()}ë…„ ${currentMonth.getMonth() + 1}ì›”`;
            renderCalendar(); updateStats(); updateRankings();
        };
        document.getElementById('btn-close-modal').onclick = () => els.modal.classList.add('hidden');
        
        els.btnSave.onclick = async () => {
            if (!currentUser) return;
            const dist = parseFloat(els.inputDistance.value) || 0;
            const attr = els.inputAttendance.checked;
            const payload = {
                distance: dist, attendance: !!attr,
                userName: currentUser, date: selectedDateStr,
                updatedAt: new Date().toISOString()
            };

            try {
                els.btnSave.disabled = true;
                els.btnSave.textContent = "ì €ì¥ ì¤‘...";
                
                // ê³µìš© ë°ì´í„° ì €ì¥ì†Œì— ë°”ë¡œ ì €ì¥ (ì¸ì¦ì´ ì—†ì–´ë„ ê·œì¹™ì´ í—ˆìš©í•˜ë©´ ì €ì¥ë¨)
                // ê·œì¹™ì´ 'if true' ì¸ ê²½ìš° ê°€ì¥ ì•ˆì •ì ìœ¼ë¡œ ì‘ë™
                await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'records', `${currentUser}_${selectedDateStr}`), payload);
                
                // ì¸ì¦ëœ ê²½ìš°ì—ë§Œ ê°œì¸ ì €ì¥ì†Œì—ë„ ë°±ì—…
                if (authUser) {
                    await setDoc(doc(db, 'artifacts', appId, 'users', authUser.uid, 'records', selectedDateStr), payload);
                }
                
                els.modal.classList.add('hidden');
            } catch (e) { 
                console.error("Save Error:", e);
                alert("ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. Firebase Databaseì˜ Rules(ê·œì¹™) íƒ­ì—ì„œ ì“°ê¸° ê¶Œí•œì´ 'allow read, write: if true;'ë¡œ ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.");
            } finally {
                els.btnSave.disabled = false;
                els.btnSave.textContent = "ë°ì´í„° ì €ì¥";
            }
        };

        init();
    </script>
</body>
</html>